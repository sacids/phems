{% extends 'layout/base.html' %}
{% load static %}
{% load humanize %}
{% load filters %}

{% block contents %}

<div class="bg-gray-100 border-b flex justify-between">
    <div class="w-3/5 px-10">
        <div class="h-4 text-sm"></div>
        <div class="h-10 flex">
            <p class="text-xl text-gray-600 font-medium uppercase">Create New Rumor</p>
        </div>
        <div class="h-2 text-xs"> </div>
    </div>
    <div class="w-2/5">
        <div> </div>
    </div>
</div>

<div class="flex h-full overflow-hidden">
    <div class="flex-1 pl-10 py-3 pr-5 h-full overflow-y-auto" x-init="initjq()">
        <form method="post" enctype="multipart/form-data" class="w-1/2 text-sm font-medium" autocomplete="off">
            {% csrf_token %}

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-1/2 px-2">
                    <label>Category</label>
                    <select name="category" id="category"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        required>
                        <option value="">Select</option>
                        <option value="Binadamu">Binadamu</option>
                        <option value="Mifugo">Mifugo</option>
                        <option value="Mazingira">Mazingira</option>
                        <option value="Wanyama">Wanyama</option>
                        <option value="Mafuriko">Mafuriko</option>
                        <option value="Ajali">Ajali</option>
                    </select>
                </div>

                <div class="w-full md:w-1/2 px-2">
                    <label>Date Occured</label>
                    <input type="date" id="date_occured" name="date_occured"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        placeholder="Date occured">
                </div>
            </div>

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-full px-2">
                    <label>Description</label>
                    <textarea rows="3" placeholder="Write rumor description..." name="description"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"></textarea>
                </div>
            </div>

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-1/2 px-2">
                    <label>Full Name</label>
                    <input type="text" name="name" id="name" placeholder="Write full name ..."
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        required>
                </div>

                <div class="w-full md:w-1/2 px-2">
                    <label>Phone</label>
                    <input type="text" name="phone" id="phone" placeholder="Write phone..."
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        required>
                </div>
            </div>

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-full px-2">
                    <label>Location</label><br/>
                    <select name="location" id="location"
                        class="get_location w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal">
                    </select>
                </div>
            </div>

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-full px-2">
                    <label>Street / Hamlet</label>
                    <textarea rows="3" placeholder="Write street / hamlet..." name="street_name"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"></textarea>
                </div>
            </div>

            <div class="flex flex-wrap mb-3">
                <div class="w-full md:w-full px-2">
                    <label class="mb-2">Is it Rumor or Alert?</label><br/>
                    <input id="rumor_alert" type="radio" value="Rumor" name="rumor_alert"
                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                    <label class="ml-2 text-sm font-medium text-gray-600">Rumor</label><br />

                    <input id="rumor_alert" type="radio" value="Alert" name="rumor_alert"
                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                    <label class="ml-2 text-sm font-medium text-gray-600">Alert</label>
                </div>
            </div>


            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-full px-2">
                    <label>Alert</label>
                    <select name="thread_id" id="thread_id"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        required>
                        <option value="">Select</option>
                        {% for alert in alert_types %}
                            <option value="{{alert.id}}">{{alert.reference}} : {{alert.title}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="flex flex-wrap mb-2">
                <div class="w-full md:w-full px-2">
                    <label>Primary Sector</label>
                    <select name="thread_id" id="thread_id"
                        class="w-full bg-white text-gray-600 border border-gray-300 rounded py-3 px-4 mb-3 my-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-600 text-sm font-normal"
                        required>
                        <option value="">Select</option>
                        {% for val in sectors %}
                        <option value="{{val.id}}">{{val.title}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="flex items-start">
                <a href="{% url 'rumors' %}"
                    class="text-white bg-red-800 hover:bg-red-700 focus:ring-4 font-medium rounded text-sm w-full sm:w-auto px-5 py-2.5 text-center mr-2">Cancel</a>
                <button type="submit"
                    class="text-white bg-slate-700 hover:bg-slate-900 focus:ring-4 font-medium rounded text-sm w-full sm:w-auto px-5 py-2.5 text-center">Submit</button>
            </div>

        </form>

    </div>

</div>

<div class="h-12 bg-gray-200"> </div>

{% endblock %}


{% block get_contents %}
<script src="{% static 'libs/popper/popper.min.js' %}"></script>
<link href="{% static 'libs/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css">
<script src="{% static 'libs/select2/js/select2.min.js' %}"></script>
<script src="{% static 'libs/inputmask/min/jquery.inputmask.bundle.min.js' %}"></script>

<script>
    function getContents() {
        return {
            new_event: {
                location: "",
                alert: "",
                contact_name: "",
                title: "",
                description: "",
                pri_sector: "",
                sector: "",
                contact_prof: "",
                contact_phone: "",
                contact_email: "",
                signal: "",
            },
        }
    }

    function initjq() {
        $(".select2").select2();
        $(".input-mask").inputmask();

        $('.get_location').select2({
            minimumInputLength: 3,
            ajax: {
                url: window.location.origin + '/ems/utils/sl',
                dataType: 'json',
                // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
            }
        });
    };
</script>

{% endblock %}